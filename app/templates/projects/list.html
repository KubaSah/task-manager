{% extends 'base.html' %}
{% block title %}Projekty{% endblock %}
{% block section_title %}Projekty{% endblock %}
{% block content %}
<div class="page-toolbar">
    <h1 class="heading-no-margin">Projekty</h1>
    <a class="btn btn-primary" href="{{ url_for('projects.create_project') }}">+ Nowy projekt</a>
</div>

<div class="grid cols-3 projects-grid">
    {% for p in projects %}
    <div class="card project-card">
        <div class="meta">{{ p.key }}</div>
        <div class="task-title project-name">{{ p.name }}</div>
        {% if p.description %}
        <p class="muted project-desc">{{ p.description[:120] }}{% if p.description|length > 120 %}…{% endif
            %}</p>
        {% endif %}
        <div class="project-card-footer">
            <span class="chip">Rola: {{ roles_by_project.get(p.id, 'member') }}</span>
            <a class="btn" href="{{ url_for('projects.project_detail', project_id=p.id) }}">Otwórz</a>
        </div>
    </div>
    {% else %}
    <div class="card">
        <p class="muted">Brak projektów</p>
    </div>
    {% endfor %}
</div>
{% endblock %}