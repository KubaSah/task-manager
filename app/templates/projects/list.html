{% extends 'base.html' %}
{% block title %}Projekty{% endblock %}
{% block section_title %}Projekty{% endblock %}
{% block content %}
<div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 14px;">
    <h1>Projekty</h1>
    <a class="btn btn-primary" href="{{ url_for('projects.create_project') }}">+ Nowy projekt</a>
</div>

<div class="grid cols-3">
    {% for p in projects %}
    <div class="card">
        <div class="meta">{{ p.key }}</div>
        <div class="task-title" style="margin:4px 0 8px">{{ p.name }}</div>
        {% if p.description %}
        <p class="muted" style="margin:0 0 10px">{{ p.description[:120] }}{% if p.description|length > 120 %}…{% endif
            %}</p>
        {% endif %}
        <div style="display:flex; gap:8px; align-items:center; justify-content: space-between;">
            <span class="chip">Rola: {{ roles_by_project.get(p.id, 'member') }}</span>
            <a class="btn" href="{{ url_for('projects.project_detail', project_id=p.id) }}">Otwórz</a>
        </div>
    </div>
    {% else %}
    <div class="card">
        <p class="muted">Brak projektów</p>
    </div>
    {% endfor %}
</div>
{% endblock %}