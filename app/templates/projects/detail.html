{% extends 'base.html' %}
{% block title %}Projekt: {{ project.key }}{% endblock %}
{% block section_title %}Projekt {{ project.key }}{% endblock %}
{% block content %}
<div class="grid" style="gap:14px;">
    <div class="card">
        <h1 style="margin-bottom:6px">{{ project.name }}</h1>
        {% if project.description %}
        <p class="muted">{{ project.description }}</p>
        {% endif %}
        <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;">
            <a class="btn btn-primary" href="{{ url_for('tasks.create_task') }}?project={{ project.id }}">+ Zadanie</a>
            <a class="btn" href="{{ url_for('tasks.list_tasks') }}">Przejdź do tablicy</a>
            <a class="btn" href="{{ url_for('projects.project_members', project_id=project.id) }}">Członkowie</a>
            <a class="btn" href="{{ url_for('api.list_tasks') }}">API</a>
            <a class="btn" href="{{ url_for('projects.list_projects') }}">Wróć do listy</a>
            <form method="post" action="{{ url_for('projects.delete_project', project_id=project.id) }}"
                style="margin-left:auto;"
                onsubmit="return confirm('Na pewno usunąć ten projekt? Tej operacji nie można cofnąć.');">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                {% if role in ['owner','admin'] %}
                <button class="btn btn-danger" type="submit">Usuń projekt</button>
                {% else %}
                <button class="btn btn-danger" type="submit" disabled title="Tylko owner/admin">Usuń projekt</button>
                {% endif %}
            </form>
        </div>
    </div>
</div>
{% endblock %}